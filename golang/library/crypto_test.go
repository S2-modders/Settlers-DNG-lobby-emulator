package library_test

import (
	"encoding/hex"
	"s2dnglobby/library"
	"testing"
)

func Test(t *testing.T) {
	d1, _ := hex.DecodeString("D82704000400050000007465737400070000004156545E58410011000000BCA2BCA3B7BA9C9EBBA7949F97948780000100ED2D000001000000000000C8342CDEFFFFFFFF000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000688642DCFFFFFFFF00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000038B792E0FFFFFFFF00000000000000000000000000000000000000000000000000000000000000000000000000000000")
	ist := library.CalcChecksum(d1)
	soll := 0xc53d8ff8
	if ist != uint32(soll) {
		t.Error(ist, "!=", soll)
	}

	d2, _ := hex.DecodeString("D8276900690002000000")
	ist = library.CalcChecksum(d2)
	soll = 0xe0000d5e
	if ist != uint32(soll) {
		t.Error(ist, "!=", soll)
	}

	d3, _ := hex.DecodeString("EFFBBADAEEFFFFEF7573657200000000D00200000400000000000000D002000004000000000000002D0000000000000001000000")
	ist = library.CalcChecksum(d3)
	soll = 0x4338f8ed
	if ist != uint32(soll) {
		t.Error(ist, "!=", soll)
	}

	d4, _ := hex.DecodeString("D8272A002A0000010000000001000000")
	ist = library.CalcChecksum(d4)
	soll = 0xb6e169a7
	if ist != uint32(soll) {
		t.Error(ist, "!=", soll)
	}

	d5, _ := hex.DecodeString("D8276A006A00CB00000057656C636F6D6520746F2054686520536574746C6572732049493A203130746820616E6E697665727361727921200A202D2D2D20796F7520617265206C6F6767656420696E2061732074657374202D2D2D200A0A205332206F6E6C696E65206C6F626279206279207A6F636B65725F3136302C20636F636F6D656420616E6420706E7872200A2876302E312D616C706861203230323229200A0A4A6F696E206F757220446973636F72643A2068747470733A2F2F646973636F72642E67672F55415848335653395179200002000000")
	ist = library.CalcChecksum(d5)
	soll = 0x9e8fbd7d
	if ist != uint32(soll) {
		t.Error(ist, "!=", soll)
	}
}
